<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Be My Valentine üåπ</title>

<style>
  *{ box-sizing:border-box; }
  :root{ --pink:#ff9fb0; }

  body{
    margin:0;
    min-height:100vh;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--pink);
    overflow:hidden;
  }

  .card{
    width: min(1100px, 96vw);
    min-height: 560px;
    margin: 40px auto;
    background: rgba(255,255,255,0.93);
    border-radius: 34px;
    box-shadow: 0 28px 75px rgba(0,0,0,.18);
    padding: 60px 60px 90px;
    text-align:center;
    position: relative; /* IMPORTANT: makes NO stay inside this box */
    overflow: hidden;   /* keeps NO from escaping visually */
  }

  h1{
    margin:0 0 12px;
    font-size: clamp(38px, 5.5vw, 78px);
    letter-spacing: -0.02em;
  }

  .sub{
    font-size: 24px;
    opacity: .9;
    margin: 0;
  }

  /* Button row is INSIDE the card now */
  .btnRow{
    position: absolute;
    left: 50%;
    top: 46%;                /* brings buttons up */
    transform: translate(-50%, -50%);
    display:flex;
    gap: 26px;
    align-items:center;
    justify-content:center;
    z-index: 20;
  }

  button{
    padding: 18px 42px;
    border-radius: 999px;
    border:none;
    cursor:pointer;
    font-size: 20px;
    font-weight: 900;
    box-shadow: 0 18px 34px rgba(0,0,0,.16);
    white-space: nowrap;
    user-select:none;
  }

  #yes{
    background: linear-gradient(90deg, #ff2d55, #ff7a9a);
    color:#fff;
    position: relative;
    z-index: 30; /* always above */
  }

  /* NO starts in the row, then becomes absolute inside the card */
  #no{
    background:#fff;
    border: 2px solid rgba(0,0,0,.15);
    position: relative;
    z-index: 25;
    transition:
      left 0.55s cubic-bezier(.16,1,.3,1),
      top  0.55s cubic-bezier(.16,1,.3,1);
  }

  /* placeholder slot to keep YES from shifting when NO detaches */
  #noSlot{
    display:none;
    width: 0px;
    height: 0px;
  }
  #noSlot.active{
    display:inline-block;
    width: var(--noW, 140px);
    height: var(--noH, 56px);
  }

  /* Message that appears when NO is clicked */
  .wrongMsg{
    position: absolute;
    left: 50%;
    top: calc(46% + 68px);
    transform: translateX(-50%);
    font-size: 20px;
    font-weight: 700;
    opacity: 0;
    transition: opacity 0.15s ease;
    z-index: 15;
    pointer-events: none;
  }
  .wrongMsg.show{ opacity: 1; }

  /* Bottom hover image tray */
  .noHoverTray{
    position: fixed;
    left: 50%;
    bottom: -520px;
    transform: translateX(-50%);
    width: min(520px, 92vw);
    height: min(360px, 45vh);
    border-radius: 22px;
    overflow: hidden;
    box-shadow: 0 26px 70px rgba(0,0,0,.28);
    z-index: 5000;
    opacity: 0;
    transition:
      bottom 0.35s cubic-bezier(.16,1,.3,1),
      opacity 0.12s linear;
    background: #fff;
    pointer-events:none;
  }
  .noHoverTray.show{
    bottom: 18px;
    opacity: 1;
  }
  .noHoverTray img{
    width:100%;
    height:100%;
    object-fit: cover;
    display:block;
  }

  /* After YES screen */
  .result{
    position: fixed;
    inset: 0;
    background: var(--pink);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 7000;
    padding: 30px;
  }
  .result.show{ display:flex; }

  .resultCard{
    width: min(900px, 96vw);
    background: rgba(255,255,255,0.95);
    border-radius: 30px;
    box-shadow: 0 28px 75px rgba(0,0,0,.22);
    padding: 40px;
    text-align:center;
  }

  .resultCard h2{
    margin:0 0 14px;
    font-size: clamp(26px, 4vw, 44px);
  }

  .resultCard p{
    margin:0 0 22px;
    font-size: 20px;
    opacity:.9;
  }

  .resultImg{
    width: min(420px, 80vw);
    height: min(420px, 80vw);
    margin: 0 auto;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 18px 55px rgba(0,0,0,.22);
    background:#fff;
  }
  .resultImg img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
  }
</style>
</head>

<body>

  <div id="card" class="card">
    <h1>Will you be my Valentine? üåπ</h1>
    <div class="sub">there‚Äôs only one right answer</div>

    <div class="btnRow" id="btnRow">
      <button id="yes">Yes üò≠üíñ</button>

      <!-- placeholder slot to stop YES shifting when NO detaches -->
      <span id="noSlot"></span>

      <button id="no">No üòê</button>
    </div>

    <div id="wrongMsg" class="wrongMsg">smh wrong answer vedanti</div>
  </div>

  <!-- NO hover image tray (slides up from bottom) -->
  <div id="noTray" class="noHoverTray">
    <img src="no-hover.jpg" alt="no hover pic">
  </div>

  <!-- After-YES screen -->
  <div id="result" class="result">
    <div class="resultCard">
      <h2>Yesss üò≠üíñ</h2>
      <p>You just made my whole day.</p>
      <div class="resultImg">
        <img src="disapproval.jpg" alt="yes pic">
      </div>
    </div>
  </div>

<script>
  const yes = document.getElementById("yes");
  const no  = document.getElementById("no");
  const noSlot = document.getElementById("noSlot");
  const noTray = document.getElementById("noTray");
  const row = document.getElementById("btnRow");
  const card = document.getElementById("card");
  const result = document.getElementById("result");
  const wrongMsg = document.getElementById("wrongMsg");

  let detached = false;

  function rect(el){ return el.getBoundingClientRect(); }
  function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

  function detachNoIntoCard(){
    if (detached) return;

    // Size + position of NO relative to the viewport
    const noR = rect(no);
    const cardR = rect(card);

    // Keep YES from shifting
    noSlot.classList.add("active");
    noSlot.style.setProperty("--noW", noR.width + "px");
    noSlot.style.setProperty("--noH", noR.height + "px");

    // Convert NO to absolute inside the card
    no.style.position = "absolute";
    no.style.left = (noR.left - cardR.left) + "px";
    no.style.top  = (noR.top  - cardR.top)  + "px";

    detached = true;
  }

  function moveNoAwayFromMouse(e){
    detachNoIntoCard();

    const cardR = rect(card);
    const yesR = rect(yes);

    // mouse position in CARD coordinates
    const mx = e.clientX - cardR.left;
    const my = e.clientY - cardR.top;

    const noLeft = parseFloat(no.style.left) || 0;
    const noTop  = parseFloat(no.style.top)  || 0;
    const noW = no.offsetWidth;
    const noH = no.offsetHeight;

    const noCX = noLeft + noW/2;
    const noCY = noTop  + noH/2;

    // move away from mouse
    let dx = noCX - mx;
    let dy = noCY - my;
    const len = Math.hypot(dx, dy) || 1;
    dx /= len; dy /= len;

    const step = 150;

    let newLeft = noLeft + dx * step;
    let newTop  = noTop  + dy * step;

    // clamp INSIDE the card
    const margin = 18;
    const minX = margin;
    const maxX = card.clientWidth  - noW - margin;
    const minY = margin;
    const maxY = card.clientHeight - noH - margin;

    newLeft = clamp(newLeft, minX, maxX);
    newTop  = clamp(newTop,  minY, maxY);

    // do not overlap YES (convert YES rect into card coords)
    const yesInCard = {
      left: yesR.left - cardR.left,
      top: yesR.top - cardR.top,
      right: yesR.right - cardR.left,
      bottom: yesR.bottom - cardR.top
    };

    const cand = {
      left: newLeft,
      top: newTop,
      right: newLeft + noW,
      bottom: newTop + noH
    };

    const overlapsYes = !(cand.right < yesInCard.left || cand.left > yesInCard.right || cand.bottom < yesInCard.top || cand.top > yesInCard.bottom);

    if (overlapsYes){
      // push horizontally away from YES
      if (cand.left < yesInCard.left) newLeft = yesInCard.left - noW - 40;
      else newLeft = yesInCard.right + 40;

      newLeft = clamp(newLeft, minX, maxX);
    }

    no.style.left = newLeft + "px";
    no.style.top  = newTop  + "px";
  }

  function showNoTray(){ noTray.classList.add("show"); }
  function hideNoTray(){ noTray.classList.remove("show"); }

  // Hover behavior: show tray and run
  no.addEventListener("mouseenter", (e) => {
    showNoTray();
    moveNoAwayFromMouse(e);
  });

  no.addEventListener("mousemove", (e) => {
    moveNoAwayFromMouse(e);
  });

  no.addEventListener("mouseleave", () => {
    hideNoTray();
  });

  // Clicking NO: show the message (but it still runs on hover)
  no.addEventListener("click", (e) => {
    e.preventDefault();
    wrongMsg.classList.add("show");
    setTimeout(()=> wrongMsg.classList.remove("show"), 1200);
  });

  // Clicking YES: go to YES screen
  yes.addEventListener("click", ()=>{
    hideNoTray();
    card.style.display="none";
    result.classList.add("show");
  });

  // If window resizes after NO is detached, clamp it back inside
  window.addEventListener("resize", () => {
    if (!detached) return;
    const noW = no.offsetWidth;
    const noH = no.offsetHeight;
    const margin = 18;

    const minX = margin;
    const maxX = card.clientWidth  - noW - margin;
    const minY = margin;
    const maxY = card.clientHeight - noH - margin;

    const curLeft = parseFloat(no.style.left) || 0;
    const curTop  = parseFloat(no.style.top)  || 0;

    no.style.left = clamp(curLeft, minX, maxX) + "px";
    no.style.top  = clamp(curTop,  minY, maxY) + "px";
  });
</script>

</body>
</html>
